"use strict";(globalThis["webpackChunkbangumi_modern"]=globalThis["webpackChunkbangumi_modern"]||[]).push([[391],{5283:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(6081);const i={fast_axios_get(e,t){s.Z.get(e,{"User-Agent":"AoiSora/BangumiByVue (https://github.com/Aoi-Sora-lan/BangumiByVue)"}).then((({data:e})=>{t(e)}))},fast_axios_post(e,t,a){s.Z.post(e,t,{"User-Agent":"AoiSora/BangumiByVue (https://github.com/Aoi-Sora-lan/BangumiByVue)"}).then((({data:e})=>{a(e)}))},get_subject(e,t){this.fast_axios_get("https://api.bgm.tv/v0/subjects/"+e.toString(),t)},get_episodes(e,t){this.fast_axios_get("https://api.bgm.tv/v0/episodes?subject_id="+e.toString()+"&type=0&limit=100&offset=0",t)},get_characters(e,t){this.fast_axios_get("https://api.bgm.tv/v0/subjects/"+e.toString()+"/characters",t)},get_character(e,t){this.fast_axios_get("https://api.bgm.tv/v0/characters/"+e.toString(),t)},get_episode(e,t){this.fast_axios_get("https://api.bgm.tv/v0/episodes/"+e.toString(),t)},search_normal(e,t,a,s){this.fast_axios_get("https://api.bgm.tv/search/subject/"+encodeURI(e)+"?type="+t+"&responseGroup=small&start="+a+"&max_results=10",s)}}},3727:(e,t,a)=>{a.d(t,{Z:()=>s});a(2879),a(5283);const s={get_characters_from_data(e){let t=[],a=e.length;console.log(a);for(let s=0;s<a;s++){if(s>=5)break;let a={};a.image_url=e[s].images.grid,a.id=e[s].id,a.character_name=e[s].name,a.person_name=e[s].actors[0].name,a.character_relation=e[s].relation,a.actor_img=e[s].actors[0].images.grid,t.push(a)}return t}}},5311:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(1809);const i=(0,s.Q_)("counter",{state:()=>({name:"",counter:1}),getters:{doubleCount(e){return 2*e.counter},get_name(e){return e.name}},actions:{increment(){this.counter++},set_name(e){this.name=e}}})},8989:(e,t,a)=>{a.d(t,{Z:()=>f});var s=a(9835),i=a(6970);const l=["src"];function n(e,t,a,n,c,o){const r=(0,s.up)("q-avatar"),d=(0,s.up)("q-item-section"),m=(0,s.up)("q-item-label"),_=(0,s.up)("q-badge"),h=(0,s.up)("q-item"),u=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(u,{class:"my-card q-ma-xs",flat:"",bordered:"",style:{"max-width":"280px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"flex-center q-pa-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"flex",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s._)("img",{style:{width:"150px",height:"150px"},src:a.character_data.image_url},null,8,l)])),_:1})])),_:1}),(0,s.Wm)(d,{class:"flex"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(a.character_data.character_name),1)])),_:1}),(0,s.Wm)(m,{caption:"",style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{outline:"",color:"secondary",label:"CV"}),(0,s.Uk)(" "+(0,i.zw)(a.character_data.person_name),1)])),_:1})])),_:1})])),_:1})])),_:1})}const c={name:"chara_card",props:{character_data:{image_url:String,character_name:String,person_name:String}}};var o=a(1639),r=a(4458),d=a(490),m=a(6749),_=a(1357),h=a(3115),u=a(990),p=a(9984),g=a.n(p);const w=(0,o.Z)(c,[["render",n]]),f=w;g()(c,"components",{QCard:r.Z,QItem:d.Z,QItemSection:m.Z,QAvatar:_.Z,QItemLabel:h.Z,QBadge:u.Z})},6391:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var s=a(9835),i=a(6970);const l={class:"row flex-center",style:{width:"100%"}},n={class:"q-py-md flex",style:{"max-width":"1000px"}},c={class:"row"},o={class:"col-12 col-md-3"},r={class:"row q-mt-sm"},d={class:"row q-ma-md"},m={class:"col-12 col-md-9 q-pa-sm q-pl-md"},_=(0,s._)("div",{class:"row text-h5"},"番剧简介",-1),h={class:"row text-body1 q-mb-md"},u={key:0,class:"row"},p={class:"col-12"},g=(0,s._)("div",{class:"row text-h5"},"番剧列表",-1),w={class:"row q-mb-md"},f={class:"text-h6"},x={class:"text-subtitle2"},v=(0,s._)("div",{class:"row text-h5"},"角色列表",-1),b={class:"row q-pb-lg"},y=(0,s._)("div",{class:"row text-h5"},"大众标签",-1),k=(0,s._)("div",{class:"row"},null,-1);function q(e,t,a,q,Z,W){const C=(0,s.up)("q-img"),S=(0,s.up)("info-box"),Q=(0,s.up)("q-separator"),j=(0,s.up)("video-card"),z=(0,s.up)("q-card-section"),B=(0,s.up)("q-card"),D=(0,s.up)("chara_card"),U=(0,s.up)("tag-box");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("div",o,[(0,s._)("div",r,[(0,s.Wm)(C,{class:"q-ma-md",src:Z.pic_src},null,8,["src"])]),(0,s._)("div",d,[(0,s.Wm)(S,{anime_data:Z.anime_data},null,8,["anime_data"])])]),(0,s._)("div",m,[_,(0,s.Wm)(Q,{class:"q-my-md"}),(0,s._)("div",h,(0,i.zw)(Z.anime_desc),1),2===Z.page_type?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",p,[(0,s.Wm)(j,{episodes:Z.select_episodes,search_name:Z.name},null,8,["episodes","search_name"])])])):(0,s.kq)("",!0),g,(0,s.Wm)(Q,{class:"q-my-md"}),(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.episode_data,(e=>((0,s.wg)(),(0,s.j4)(B,{class:(0,i.C_)(e.ep===Z.select_episodes?"bg-blue-1":""),key:e,flat:"",bordered:"",style:{width:"200px",margin:"5px 5px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{onClick:t=>Z.select_episodes=e.ep,style:{padding:"5px 10px"}},{default:(0,s.w5)((()=>[(0,s._)("div",f,(0,i.zw)(e.ep),1),(0,s._)("div",x,(0,i.zw)(e.name_cn),1)])),_:2},1032,["onClick"])])),_:2},1032,["class"])))),128))]),v,(0,s.Wm)(Q,{class:"q-my-md"}),(0,s._)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.anime_characters,(e=>((0,s.wg)(),(0,s.j4)(D,{key:e,character_data:e,style:{width:"200px"}},null,8,["character_data"])))),128))]),y,(0,s.Wm)(Q,{class:"q-my-md"}),(0,s.Wm)(U,{anime_data:Z.anime_data},null,8,["anime_data"])])]),k])])}a(2879);function Z(e,t,a,l,n,c){const o=(0,s.up)("q-item-label"),r=(0,s.up)("q-item-section"),d=(0,s.up)("q-item"),m=(0,s.up)("q-list");return(0,s.wg)(),(0,s.j4)(m,{bordered:"",separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.anime_infos,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.key),1)])),_:2},1024),"object"!==typeof e.value?((0,s.wg)(),(0,s.j4)(o,{key:0,caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.value),1)])),_:2},1024)):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(e.value,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s.Wm)(o,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.v),1)])),_:2},1024)])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})}const W={name:"InfoBox",props:{anime_data:{type:Object,required:!0}},data(){return{anime_infos:[]}},created(){this.$watch((()=>this.anime_data),((e,t)=>{console.log("child-watch-on"),0!=this.anime_infos.length&&this.anime_infos.splice(0);let a=this.anime_data;for(let s in a.infobox)this.anime_infos.push(a.infobox[s]);console.log(this.anime_infos)}))},mounted(){console.log("child-mount-on")}};var C=a(1639),S=a(3246),Q=a(490),j=a(6749),z=a(3115),B=a(9984),D=a.n(B);const U=(0,C.Z)(W,[["render",Z]]),A=U;D()(W,"components",{QList:S.Z,QItem:Q.Z,QItemSection:j.Z,QItemLabel:z.Z});var I=a(3727),V=a(5283),H=(a(6663),a(8989)),Y=a(5311);const K={class:"row flex-center q-pa-md"},O=["src"],P={class:"row flex-center q-pa-md",style:{width:"200px"}},L={class:"col-12"},T={class:"row"},M={class:"row flex-center"},$={style:{width:"90%"},class:"text-body2 text-center"},E={class:"col-9",style:{height:"100%"}};function F(e,t,a,l,n,c){const o=(0,s.up)("q-item-section"),r=(0,s.up)("q-item"),d=(0,s.up)("q-list"),m=(0,s.up)("q-menu"),_=(0,s.up)("q-btn"),h=(0,s.up)("q-knob"),u=(0,s.up)("q-card"),p=(0,s.up)("q-page-sticky"),g=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",K,[(0,s._)("iframe",{class:"col-12",style:{height:"400px"},referrerPolicy:"no-referrer",src:n.video_src,allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"},null,8,O)]),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s.Wm)(u,{class:"col-12 q-pa-md bg-blue-2"},{default:(0,s.w5)((()=>[(0,s._)("div",L,[(0,s._)("div",T,[(0,s.Wm)(_,{onClick:c.fetch_the_anime,push:"",label:n.select_anime,class:"col-12 bg-pink-3 text-h5 text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.text_list,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{onClick:t=>c.select_the_anime(e),clickable:"",key:e},{default:(0,s.w5)((()=>[(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[g]]))),128))])),_:1})])),_:1})])),_:1},8,["onClick","label"])]),(0,s._)("div",M,[(0,s.Wm)(h,{min:1,max:6,"inner-min":1,modelValue:n.lines,"onUpdate:modelValue":t[0]||(t[0]=e=>n.lines=e),"show-value":"",size:"80px",thickness:.25,color:"blue-3","track-color":"grey-3",class:"q-ma-md"},{default:(0,s.w5)((()=>[(0,s._)("div",$,(0,i.zw)("频道："+n.lines.toString()),1)])),_:1},8,["modelValue"]),(0,s._)("div",E,[(0,s.Wm)(_,{onClick:c.play_the_anime,push:"",label:"播放→V→",style:{width:"100%"},class:"bg-pink-3 text-h5 text-white"},null,8,["onClick"])])])])])),_:1})])])),_:1})],64)}var G=a(6081);const N={name:"VideoCard",props:{search_name:String,episodes:Number},data(){return{select_anime:"匹配番剧  OVO",lines:2,video_src:"",text_list:[],href_list:[]}},methods:{fetch_the_anime(){this.text_list.push("加载中..."),G.Z.get("https://www.agedm.org/search?query="+this.search_name.toString()).then((({data:e})=>{this.text_list.length>0&&(this.text_list.splice(0),this.href_list.splice(0));const t=new DOMParser,a=t.parseFromString(e,"text/html"),s=a.getElementById("cata_video_list").children[0],i=s.childElementCount;for(let l=0;l<i;l++){let e=s.children[l].children[0].children[0].children[0].children[0].getAttribute("href").toString(),t=s.children[l].children[0].children[0].children[0].children[0].getAttribute("title").toString();this.text_list.push(t),this.href_list.push(e)}console.log(this.text_list)}))},select_the_anime(e){this.select_anime=e},play_the_anime(){const e=(this.href_list[this.text_list.indexOf(this.select_anime)]+"/"+this.lines+"/"+this.episodes).replace("detail","play");G.Z.get(e).then((({data:e})=>{const t=new DOMParser,a=t.parseFromString(e,"text/html"),s=a.querySelector("iframe");console.log(s),this.video_src=s.getAttribute("src"),console.log(this.video_src)}))}}};var R=a(627),J=a(4458),X=a(8879),ee=a(4735),te=a(2245),ae=a(2146);const se=(0,C.Z)(N,[["render",F]]),ie=se;D()(N,"components",{QPageSticky:R.Z,QCard:J.Z,QBtn:X.Z,QMenu:ee.Z,QList:S.Z,QItem:Q.Z,QItemSection:j.Z,QKnob:te.Z}),D()(N,"directives",{ClosePopup:ae.Z});const le={class:"q-pt-xs",style:{width:"600px"}};function ne(e,t,a,l,n,c){const o=(0,s.up)("text-h3"),r=(0,s.up)("text-caption"),d=(0,s.up)("q-chip");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(o,{class:"text-weight-bold"},{default:(0,s.w5)((()=>[(0,s.Uk)("大家将"+(0,i.zw)(n.anime_name)+"标注为",1)])),_:1}),(0,s._)("div",le,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.anime_tags,(t=>((0,s.wg)(),(0,s.iD)("small",{key:t},[(0,s.Wm)(d,{class:"bg-pink-3 text-white",square:"",clickable:"",onClick:e.onclick},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.name)+" ",1),(0,s.Wm)(r,{class:"q-pl-md text-white"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.count),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128)),(0,s.Wm)(d,{class:"bg-pink-3",square:"",clickable:"",onClick:e.onclick},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Uk)("更多+")])),_:1})])),_:1},8,["onClick"])])],64)}const ce={name:"TagBox",props:{anime_data:{type:Object,required:!0}},data(){return{anime_tags:[],anime_name:""}},created(){this.$watch((()=>this.anime_data),((e,t)=>{0!=this.anime_tags.length&&this.anime_tags.splice(0);let a=this.anime_data;this.anime_name=a.name;for(let s in a.tags)this.anime_tags.push(a.tags[s]);console.log(this.anime_tags)}))},mounted(){console.log("child-mount-on")}};var oe=a(7691);const re=(0,C.Z)(ce,[["render",ne]]),de=re;D()(ce,"components",{QChip:oe.Z});const me={name:"AnimePage",components:{TagBox:de,VideoCard:ie,chara_card:H.Z,InfoBox:A},methods:{update_page(){this.id=this.$route.params.id,V.Z.get_subject(this.id,(e=>{this.anime_data=e,this.pic_src=e.images.common,this.anime_desc=e.summary;let t=(0,Y.A)();""!=e.name_cn?t.name=e.name_cn:t.name=e.name,this.name=t.name,this.page_type=e.type,console.log(this.name)})),V.Z.get_characters(this.id,(e=>{this.anime_characters=I.Z.get_characters_from_data(e)})),V.Z.get_episodes(this.id,(e=>{0!==this.episode_data.length&&this.episode_data.splice(0);for(let t in e.data)""!==e.data[t].name_cn&&this.episode_data.push(e.data[t])}))}},data(){return{id:0,video_src:"",pic_src:"",anime_data:null,anime_desc:"",name:"",page_type:0,anime_characters:[],episode_data:[],store:null,select_episodes:1}},mounted(){this.update_page()}};var _e=a(335),he=a(926),ue=a(3190);const pe=(0,C.Z)(me,[["render",q]]),ge=pe;D()(me,"components",{QImg:_e.Z,QSeparator:he.Z,QCard:J.Z,QCardSection:ue.Z})}}]);