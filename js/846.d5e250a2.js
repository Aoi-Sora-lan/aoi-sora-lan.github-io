"use strict";(globalThis["webpackChunkbangumi_modern"]=globalThis["webpackChunkbangumi_modern"]||[]).push([[846],{5283:(t,e,s)=>{s.d(e,{Z:()=>i});var a=s(6081);const i={fast_axios_get(t,e){a.Z.get(t,{"User-Agent":"AoiSora/BangumiByVue (https://github.com/Aoi-Sora-lan/BangumiByVue)"}).then((({data:t})=>{e(t)}))},fast_axios_post(t,e,s){a.Z.post(t,e,{"User-Agent":"AoiSora/BangumiByVue (https://github.com/Aoi-Sora-lan/BangumiByVue)"}).then((({data:t})=>{s(t)}))},get_subject(t,e){this.fast_axios_get("https://api.bgm.tv/v0/subjects/"+t.toString(),e)},get_episodes(t,e){this.fast_axios_get("https://api.bgm.tv/v0/episodes?subject_id="+t.toString()+"&type=0&limit=100&offset=0",e)},get_characters(t,e){this.fast_axios_get("https://api.bgm.tv/v0/subjects/"+t.toString()+"/characters",e)},get_character(t,e){this.fast_axios_get("https://api.bgm.tv/v0/characters/"+t.toString(),e)},get_episode(t,e){this.fast_axios_get("https://api.bgm.tv/v0/episodes/"+t.toString(),e)},search_normal(t,e,s,a){this.fast_axios_get("https://api.bgm.tv/search/subject/"+encodeURI(t)+"?type="+e+"&responseGroup=small&start="+s+"&max_results=10",a)}}},3846:(t,e,s)=>{s.r(e),s.d(e,{default:()=>$});var a=s(9835),i=s(6970);const o={class:"flex flex-center q-pa-md"},r={style:{width:"100%","max-width":"1000px"}},c={class:"row flex-center"},l={class:"col-2 flex-center"},n={class:"col-2"},u=(0,a._)("div",{class:"row"},[(0,a._)("div")],-1),_={class:"row"};function h(t,e,s,h,m,p){const d=(0,a.up)("q-item-label"),g=(0,a.up)("q-item-section"),b=(0,a.up)("q-item"),w=(0,a.up)("q-list"),f=(0,a.up)("q-btn-dropdown"),v=(0,a.up)("q-input"),y=(0,a.up)("q-btn"),x=(0,a.up)("q-separator"),k=(0,a.up)("search-item"),Z=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[(0,a._)("div",c,[(0,a._)("div",l,[(0,a.Wm)(f,{label:m.search_type_prompt,square:"",push:"",class:"bg-pink-3 text-subtitle1 text-grey-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.search_prompts,((t,e,s)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{key:s,clickable:"",onClick:()=>{m.search_type=m.search_types[e],m.search_type_prompt=t}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[Z]]))),128))])),_:1})])),_:1},8,["label"])]),(0,a.Wm)(v,{modelValue:m.search_name,"onUpdate:modelValue":e[0]||(e[0]=t=>m.search_name=t),class:"col-8"},null,8,["modelValue"]),(0,a._)("div",n,[(0,a.Wm)(y,{onClick:p.on_click,class:"q-ma-md"},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1},8,["onClick"])])]),u,(0,a._)("div",_,[(0,a.Wm)(x,{class:"col q-my-lg"})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.search_ids,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"row q-pb-lg",key:t},[(0,a.Wm)(k,{subject_id:t,class:"col"},null,8,["subject_id"])])))),128))])])}s(2879);const m={class:"text-h5 text-blue q-mt-sm q-mb-xs"},p={class:"text-body1 text-grey",style:{"max-height":"140px",overflow:"hidden"}};function d(t,e,s,o,r,c){const l=(0,a.up)("q-img"),n=(0,a.up)("router-link"),u=(0,a.up)("q-card-section"),_=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(_,{flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{horizontal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{class:"col-2",src:r.pic_url},null,8,["src"]),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{to:"/subject/"+s.subject_id.toString(),style:{"text-decoration":"none"}},{default:(0,a.w5)((()=>[(0,a._)("div",m,(0,i.zw)(r.title),1)])),_:1},8,["to"]),(0,a._)("div",p,(0,i.zw)(r.detail),1)])),_:1})])),_:1})])),_:1})}var g=s(5283);const b={name:"SearchItem",props:{subject_id:Number},data(){return{detail:"",title:"",pic_url:""}},mounted(){g.Z.get_subject(this.subject_id,(t=>{this.detail=t.summary,""!==t.name_cn?this.title=t.name_cn:this.title=t.name,this.pic_url=t.images.common}))}};var w=s(1639),f=s(4458),v=s(3190),y=s(335),x=s(9984),k=s.n(x);const Z=(0,w.Z)(b,[["render",d]]),q=Z;k()(b,"components",{QCard:f.Z,QCardSection:v.Z,QImg:y.Z});const S={name:"SearchPage",components:{SearchItem:q},data(){return{search_ids:[],search_name:"",anime_tags_name:["日本","动画","日本动画","国产"],anime_tags_bool:[!1,!1,!0,!1],search_type_prompt:"全部",search_type:0,search_prompts:["全部","书籍","二次元","音乐","游戏","三次元"],search_types:[0,1,2,3,4,6]}},methods:{on_click(){this.on_search()},on_search(){g.Z.search_normal(this.search_name,this.search_type,0,(t=>{console.log(t);const e=t.list;this.search_ids.length>0&&this.search_ids.splice(0);for(let s in e)this.search_ids.push(e[s].id);console.log(this.search_ids)}))}},mounted(){void 0!==this.$route.params.keyword?(this.search_name=this.$route.params.keyword,this.on_search(),console.log(this.$route.params.keyword)):(this.search_name="",this.on_search())}};var j=s(8479),Q=s(3246),W=s(490),B=s(6749),C=s(3115),I=s(7471),V=s(8879),A=s(1006),U=s(926),D=s(2146);const z=(0,w.Z)(S,[["render",h]]),$=z;k()(S,"components",{QBtnDropdown:j.Z,QList:Q.Z,QItem:W.Z,QItemSection:B.Z,QItemLabel:C.Z,QInput:I.Z,QBtn:V.Z,QCheckbox:A.Z,QSeparator:U.Z}),k()(S,"directives",{ClosePopup:D.Z})}}]);